var $e=Object.defineProperty;var Le=(o,e,t)=>e in o?$e(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Q=(o,e,t)=>Le(o,typeof e!="symbol"?e+"":e,t);import{j as s,c as U,a as Oe,r as l,R as T,u as P,b as ee,d as ae,P as M,e as A,f as te,B as G,A as Pe,g as De,C as k,h as V,i as K,k as J,l as _,m as Ue}from"./index-DBLO01m2.js";class ze{async captureCurrentTab(){try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!e.id)throw new Error("No active tab found");const t=await this.captureScreenshot(e.id),n=await this.extractJSXSource(e.id);return{screenshot:t,jsxSource:n,url:e.url||"",timestamp:Date.now()}}catch(e){throw console.error("Capture failed:",e),e}}async captureScreenshot(e){try{const t=await chrome.tabs.captureVisibleTab(e,{format:"png",quality:100});return await(await fetch(t)).blob()}catch(t){throw console.error("Screenshot capture failed:",t),new Error("Failed to capture screenshot")}}async extractJSXSource(e){try{const t=await chrome.scripting.executeScript({target:{tabId:e},func:this.extractReactComponents});return t&&t[0]&&t[0].result?t[0].result:""}catch(t){return console.error("JSX extraction failed:",t),""}}extractReactComponents(){try{if(window.__REACT_DEVTOOLS_GLOBAL_HOOK__){const t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__.renderers;if(t&&t.size>0){const n=t.values().next().value;if(n&&n.getFiberRoots){const r=n.getFiberRoots();if(r.size>0){const i=r.values().next().value;return this.serializeComponentTree(i.current)}}}}return this.extractDOMStructure()}catch(e){return console.error("React component extraction failed:",e),this.extractDOMStructure()}}serializeComponentTree(e){var i,a;if(!e)return"";const t=((i=e.type)==null?void 0:i.name)||((a=e.type)==null?void 0:a.displayName)||(typeof e.type=="string"?e.type:"Unknown");let n=`<${t}`;e.memoizedProps&&Object.entries(e.memoizedProps).forEach(([c,u])=>{c!=="children"&&u!==void 0&&(typeof u=="string"?n+=` ${c}="${u}"`:n+=` ${c}={${JSON.stringify(u)}}`)});let r=e.child;if(r){for(n+=`>
`;r;)n+="  "+this.serializeComponentTree(r),r=r.sibling;n+=`</${t}>`}else n+=" />";return n}extractDOMStructure(){const e=document.body;return e?this.domToJSX(e):""}domToJSX(e,t=0){var c;const n="  ".repeat(t),r=e.tagName.toLowerCase();let i=`${n}<${r}`;Array.from(e.attributes).forEach(u=>{u.name!=="class"&&(i+=` ${u.name}="${u.value}"`)}),e.className&&(i+=` className="${e.className}"`);const a=Array.from(e.children);return a.length>0?(i+=`>
`,a.forEach(u=>{i+=this.domToJSX(u,t+1)+`
`}),i+=`${n}</${r}>`):(c=e.textContent)!=null&&c.trim()?i+=`>${e.textContent.trim()}</${r}>`:i+=" />",i}}const Be=new ze;class Ge{constructor(){Q(this,"rules",[]);this.initializeRules()}initializeRules(){this.rules=[this.createContrastRule(),this.createSpacingRule(),this.createComponentMisuseRule()]}async analyzePage(e){const t=[],n=document.querySelectorAll("button, input, a, p, h1, h2, h3, h4, h5, h6, div, span");for(const r of n)if(r instanceof HTMLElement)for(const i of this.rules){const a=i.check(r,e);a&&t.push(a)}return t}createContrastRule(){return{id:"contrast-check",name:"Color Contrast Check",description:"Check if text has sufficient contrast against background",check:(e,t)=>{const n=window.getComputedStyle(e),r=n.backgroundColor,i=n.color;if(!r||!i||r==="transparent")return null;const a=this.calculateContrast(r,i),u=this.isLargeText(e)?3:4.5;return a<u?{id:`contrast-${Date.now()}-${Math.random()}`,type:"contrast",severity:"error",location:e.getBoundingClientRect(),suggestion:`Increase contrast ratio from ${a.toFixed(2)}:1 to at least ${u}:1. Consider using a darker text color or lighter background.`,element:e,originalCode:e.outerHTML,suggestedCode:this.suggestContrastFix(e,t)}:null}}}createSpacingRule(){return{id:"spacing-check",name:"Spacing Consistency Check",description:"Check if spacing follows consistent grid system",check:(e,t)=>{const n=window.getComputedStyle(e),r=parseFloat(n.margin)||0,i=parseFloat(n.padding)||0;if(r===0&&i===0)return null;const a=t.spacingScale,c=this.findNearestSpacing(r+i,a);return Math.abs(r+i-c)>2?{id:`spacing-${Date.now()}-${Math.random()}`,type:"spacing",severity:"warn",location:e.getBoundingClientRect(),suggestion:`Use consistent spacing: ${c}px instead of ${r+i}px. Consider using Tailwind classes like 'p-${this.getTailwindSpacingClass(c)}' or 'm-${this.getTailwindSpacingClass(c)}'.`,element:e,originalCode:e.outerHTML,suggestedCode:this.suggestSpacingFix(e,c)}:null}}}createComponentMisuseRule(){return{id:"component-misuse",name:"Component Misuse Check",description:"Check for raw HTML elements that should use Radix components",check:(e,t)=>{const n=e.tagName.toLowerCase(),r=this.getComponentMapping(n,e);return r?{id:`component-${Date.now()}-${Math.random()}`,type:"component-misuse",severity:"warn",location:e.getBoundingClientRect(),suggestion:`Replace <${n}> with ${r.radixComponent} for better accessibility and consistency.`,element:e,originalCode:e.outerHTML,suggestedCode:this.suggestComponentFix(e,r)}:null}}}calculateContrast(e,t){const n=this.getLuminance(e),r=this.getLuminance(t),i=Math.max(n,r),a=Math.min(n,r);return(i+.05)/(a+.05)}getLuminance(e){const t=this.parseColor(e);if(!t)return 0;const[n,r,i]=t.map(a=>(a=a/255,a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)));return .2126*n+.7152*r+.0722*i}parseColor(e){const t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(t)return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])];const n=e.match(/#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}isLargeText(e){const t=window.getComputedStyle(e),n=parseFloat(t.fontSize),r=parseInt(t.fontWeight)||400;return n>=18||n>=14&&r>=700}findNearestSpacing(e,t){return t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}getTailwindSpacingClass(e){return{2:"0.5",4:"1",8:"2",12:"3",16:"4",20:"5",24:"6",32:"8",40:"10",48:"12",64:"16",80:"20",96:"24"}[e]||e.toString()}getComponentMapping(e,t){return{button:{radixComponent:"Button",props:{variant:"default"},className:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background"},input:{radixComponent:"Input",props:{},className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},select:{radixComponent:"Select",props:{},className:""}}[e]||null}suggestContrastFix(e,t){const n=e.cloneNode(!0);return n.style.color="#000000",n.outerHTML}suggestSpacingFix(e,t){const n=e.cloneNode(!0);return n.className=`p-${this.getTailwindSpacingClass(t)}`,n.outerHTML}suggestComponentFix(e,t){const n=Object.entries(t.props).map(([i,a])=>`${i}="${a}"`).join(" "),r=t.className?` className="${t.className}"`:"";return`<${t.radixComponent} ${n}${r}>${e.textContent}</${t.radixComponent}>`}}const Ve=new Ge;class Ke{async generateImprovedCode(e,t,n){try{let r=e;return r=this.applyComponentFixes(r,t),r=this.applySpacingFixes(r,t,n),r=this.applyContrastFixes(r,t,n),this.formatCode(r)}catch(r){return console.error("Code generation failed:",r),e}}applyComponentFixes(e,t){let n=e;return t.filter(i=>i.type==="component-misuse").forEach(i=>{i.originalCode&&i.suggestedCode&&(n=n.replace(i.originalCode,i.suggestedCode))}),n}applySpacingFixes(e,t,n){let r=e;return t.filter(a=>a.type==="spacing").forEach(a=>{if(a.suggestion){const c=a.suggestion.match(/(\d+)px/);if(c){const u=parseInt(c[1]),m=this.getTailwindSpacingClass(u);r=r.replace(/className="([^"]*)"/g,(d,p)=>`className="${p} p-${m}"`)}}}),r}applyContrastFixes(e,t,n){let r=e;return t.filter(a=>a.type==="contrast").length>0&&(r=r.replace(/className="([^"]*)"/g,(a,c)=>`className="${c} text-foreground bg-background"`)),r}getTailwindSpacingClass(e){return{2:"0.5",4:"1",8:"2",12:"3",16:"4",20:"5",24:"6",32:"8",40:"10",48:"12",64:"16",80:"20",96:"24"}[e]||e.toString()}formatCode(e){return e.replace(/\s+/g," ").replace(/>\s+</g,`>
<`).replace(/\n\s*\n/g,`
`).trim()}async generateDiff(e,t){const n=require("diff"),r=n.createUnifiedDiff("original.jsx","improved.jsx",e.split(`
`),t.split(`
`),{context:3}),i=n.diffLines(e,t).map(a=>({type:a.added?"added":a.removed?"removed":"modified",line:0,content:a.value}));return{original:e,generated:t,unifiedDiff:r.join(`
`),changes:i}}}const ne=new Ke,Je=Oe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function oe({className:o,variant:e,...t}){return s.jsx("div",{className:U(Je({variant:e}),o),...t})}function S(o,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(o==null||o(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function H(o,e=[]){let t=[];function n(i,a){const c=l.createContext(a),u=t.length;t=[...t,a];const m=p=>{var C;const{scope:h,children:f,...v}=p,x=((C=h==null?void 0:h[o])==null?void 0:C[u])||c,g=l.useMemo(()=>v,Object.values(v));return s.jsx(x.Provider,{value:g,children:f})};m.displayName=i+"Provider";function d(p,h){var x;const f=((x=h==null?void 0:h[o])==null?void 0:x[u])||c,v=l.useContext(f);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[m,d]}const r=()=>{const i=t.map(a=>l.createContext(a));return function(c){const u=(c==null?void 0:c[o])||i;return l.useMemo(()=>({[`__scope${o}`]:{...c,[o]:u}}),[c,u])}};return r.scopeName=o,[n,qe(r,...e)]}function qe(...o){const e=o[0];if(o.length===1)return e;const t=()=>{const n=o.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=n.reduce((c,{useScope:u,scopeName:m})=>{const p=u(i)[`__scope${m}`];return{...c,...p}},{});return l.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function We(o){const e=o+"CollectionProvider",[t,n]=H(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:g,children:C}=x,N=T.useRef(null),b=T.useRef(new Map).current;return s.jsx(r,{scope:g,itemMap:b,collectionRef:N,children:C})};a.displayName=e;const c=o+"CollectionSlot",u=ee(c),m=T.forwardRef((x,g)=>{const{scope:C,children:N}=x,b=i(c,C),y=P(g,b.collectionRef);return s.jsx(u,{ref:y,children:N})});m.displayName=c;const d=o+"CollectionItemSlot",p="data-radix-collection-item",h=ee(d),f=T.forwardRef((x,g)=>{const{scope:C,children:N,...b}=x,y=T.useRef(null),I=P(g,y),R=i(d,C);return T.useEffect(()=>(R.itemMap.set(y,{ref:y,...b}),()=>void R.itemMap.delete(y))),s.jsx(h,{[p]:"",ref:I,children:N})});f.displayName=d;function v(x){const g=i(o+"CollectionConsumer",x);return T.useCallback(()=>{const N=g.collectionRef.current;if(!N)return[];const b=Array.from(N.querySelectorAll(`[${p}]`));return Array.from(g.itemMap.values()).sort((R,E)=>b.indexOf(R.ref.current)-b.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:m,ItemSlot:f},v,n]}var D=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{},Xe=ae[" useId ".trim().toString()]||(()=>{}),He=0;function ie(o){const[e,t]=l.useState(Xe());return D(()=>{t(n=>n??String(He++))},[o]),e?`radix-${e}`:""}function Ye(o){const e=l.useRef(o);return l.useEffect(()=>{e.current=o}),l.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}var Ze=ae[" useInsertionEffect ".trim().toString()]||D;function ce({prop:o,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,i,a]=Qe({defaultProp:e,onChange:t}),c=o!==void 0,u=c?o:r;{const d=l.useRef(o!==void 0);l.useEffect(()=>{const p=d.current;p!==c&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=c},[c,n])}const m=l.useCallback(d=>{var p;if(c){const h=et(d)?d(o):d;h!==o&&((p=a.current)==null||p.call(a,h))}else i(d)},[c,o,i,a]);return[u,m]}function Qe({defaultProp:o,onChange:e}){const[t,n]=l.useState(o),r=l.useRef(t),i=l.useRef(e);return Ze(()=>{i.current=e},[e]),l.useEffect(()=>{var a;r.current!==t&&((a=i.current)==null||a.call(i,t),r.current=t)},[t,r]),[t,n,i]}function et(o){return typeof o=="function"}var tt=l.createContext(void 0);function le(o){const e=l.useContext(tt);return o||e||"ltr"}var q="rovingFocusGroup.onEntryFocus",nt={bubbles:!1,cancelable:!0},F="RovingFocusGroup",[X,ue,ot]=We(F),[rt,de]=H(F,[ot]),[st,at]=rt(F),fe=l.forwardRef((o,e)=>s.jsx(X.Provider,{scope:o.__scopeRovingFocusGroup,children:s.jsx(X.Slot,{scope:o.__scopeRovingFocusGroup,children:s.jsx(it,{...o,ref:e})})}));fe.displayName=F;var it=l.forwardRef((o,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:m,preventScrollOnEntryFocus:d=!1,...p}=o,h=l.useRef(null),f=P(e,h),v=le(i),[x,g]=ce({prop:a,defaultProp:c??null,onChange:u,caller:F}),[C,N]=l.useState(!1),b=Ye(m),y=ue(t),I=l.useRef(!1),[R,E]=l.useState(0);return l.useEffect(()=>{const w=h.current;if(w)return w.addEventListener(q,b),()=>w.removeEventListener(q,b)},[b]),s.jsx(st,{scope:t,orientation:n,dir:v,loop:r,currentTabStopId:x,onItemFocus:l.useCallback(w=>g(w),[g]),onItemShiftTab:l.useCallback(()=>N(!0),[]),onFocusableItemAdd:l.useCallback(()=>E(w=>w+1),[]),onFocusableItemRemove:l.useCallback(()=>E(w=>w-1),[]),children:s.jsx(M.div,{tabIndex:C||R===0?-1:0,"data-orientation":n,...p,ref:f,style:{outline:"none",...o.style},onMouseDown:S(o.onMouseDown,()=>{I.current=!0}),onFocus:S(o.onFocus,w=>{const Fe=!I.current;if(w.target===w.currentTarget&&Fe&&!C){const Z=new CustomEvent(q,nt);if(w.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const B=y().filter(j=>j.focusable),Ee=B.find(j=>j.active),ke=B.find(j=>j.id===x),_e=[Ee,ke,...B].filter(Boolean).map(j=>j.ref.current);ge(_e,d)}}I.current=!1}),onBlur:S(o.onBlur,()=>N(!1))})})}),pe="RovingFocusGroupItem",me=l.forwardRef((o,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:i,children:a,...c}=o,u=ie(),m=i||u,d=at(pe,t),p=d.currentTabStopId===m,h=ue(t),{onFocusableItemAdd:f,onFocusableItemRemove:v,currentTabStopId:x}=d;return l.useEffect(()=>{if(n)return f(),()=>v()},[n,f,v]),s.jsx(X.ItemSlot,{scope:t,id:m,focusable:n,active:r,children:s.jsx(M.span,{tabIndex:p?0:-1,"data-orientation":d.orientation,...c,ref:e,onMouseDown:S(o.onMouseDown,g=>{n?d.onItemFocus(m):g.preventDefault()}),onFocus:S(o.onFocus,()=>d.onItemFocus(m)),onKeyDown:S(o.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const C=ut(g,d.orientation,d.dir);if(C!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=h().filter(y=>y.focusable).map(y=>y.ref.current);if(C==="last")b.reverse();else if(C==="prev"||C==="next"){C==="prev"&&b.reverse();const y=b.indexOf(g.currentTarget);b=d.loop?dt(b,y+1):b.slice(y+1)}setTimeout(()=>ge(b))}}),children:typeof a=="function"?a({isCurrentTabStop:p,hasTabStop:x!=null}):a})})});me.displayName=pe;var ct={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lt(o,e){return e!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function ut(o,e,t){const n=lt(o.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ct[n]}function ge(o,e=!1){const t=document.activeElement;for(const n of o)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function dt(o,e){return o.map((t,n)=>o[(e+n)%o.length])}var ft=fe,pt=me;function mt(o,e){return l.useReducer((t,n)=>e[t][n]??t,o)}var he=o=>{const{present:e,children:t}=o,n=gt(e),r=typeof t=="function"?t({present:n.isPresent}):l.Children.only(t),i=P(n.ref,ht(r));return typeof t=="function"||n.isPresent?l.cloneElement(r,{ref:i}):null};he.displayName="Presence";function gt(o){const[e,t]=l.useState(),n=l.useRef(null),r=l.useRef(o),i=l.useRef("none"),a=o?"mounted":"unmounted",[c,u]=mt(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const m=$(n.current);i.current=c==="mounted"?m:"none"},[c]),D(()=>{const m=n.current,d=r.current;if(d!==o){const h=i.current,f=$(m);o?u("MOUNT"):f==="none"||(m==null?void 0:m.display)==="none"?u("UNMOUNT"):u(d&&h!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=o}},[o,u]),D(()=>{if(e){let m;const d=e.ownerDocument.defaultView??window,p=f=>{const x=$(n.current).includes(f.animationName);if(f.target===e&&x&&(u("ANIMATION_END"),!r.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",m=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=f=>{f.target===e&&(i.current=$(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{d.clearTimeout(m),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:l.useCallback(m=>{n.current=m?getComputedStyle(m):null,t(m)},[])}}function $(o){return(o==null?void 0:o.animationName)||"none"}function ht(o){var n,r;let e=(n=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?o.ref:(e=(r=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?o.props.ref:o.props.ref||o.ref)}var z="Tabs",[xt,Rt]=H(z,[de]),xe=de(),[vt,Y]=xt(z),ve=l.forwardRef((o,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:c,activationMode:u="automatic",...m}=o,d=le(c),[p,h]=ce({prop:n,onChange:r,defaultProp:i??"",caller:z});return s.jsx(vt,{scope:t,baseId:ie(),value:p,onValueChange:h,orientation:a,dir:d,activationMode:u,children:s.jsx(M.div,{dir:d,"data-orientation":a,...m,ref:e})})});ve.displayName=z;var Ce="TabsList",be=l.forwardRef((o,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=o,i=Y(Ce,t),a=xe(t);return s.jsx(ft,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(M.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});be.displayName=Ce;var ye="TabsTrigger",we=l.forwardRef((o,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...i}=o,a=Y(ye,t),c=xe(t),u=Te(a.baseId,n),m=je(a.baseId,n),d=n===a.value;return s.jsx(pt,{asChild:!0,...c,focusable:!r,active:d,children:s.jsx(M.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":m,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...i,ref:e,onMouseDown:S(o.onMouseDown,p=>{!r&&p.button===0&&p.ctrlKey===!1?a.onValueChange(n):p.preventDefault()}),onKeyDown:S(o.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&a.onValueChange(n)}),onFocus:S(o.onFocus,()=>{const p=a.activationMode!=="manual";!d&&!r&&p&&a.onValueChange(n)})})})});we.displayName=ye;var Ne="TabsContent",Se=l.forwardRef((o,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:i,...a}=o,c=Y(Ne,t),u=Te(c.baseId,n),m=je(c.baseId,n),d=n===c.value,p=l.useRef(d);return l.useEffect(()=>{const h=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(he,{present:r||d,children:({present:h})=>s.jsx(M.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!h,id:m,tabIndex:0,...a,ref:e,style:{...o.style,animationDuration:p.current?"0s":void 0},children:h&&i})})});Se.displayName=Ne;function Te(o,e){return`${o}-trigger-${e}`}function je(o,e){return`${o}-content-${e}`}var Ct=ve,Ie=be,Re=we,Me=Se;const bt=Ct,Ae=l.forwardRef(({className:o,...e},t)=>s.jsx(Ie,{ref:t,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",o),...e}));Ae.displayName=Ie.displayName;const L=l.forwardRef(({className:o,...e},t)=>s.jsx(Re,{ref:t,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",o),...e}));L.displayName=Re.displayName;const O=l.forwardRef(({className:o,...e},t)=>s.jsx(Me,{ref:t,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",o),...e}));O.displayName=Me.displayName;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=A("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=A("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=A("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=A("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=A("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=A("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function St(){const[o,e]=l.useState(!1),[t,n]=l.useState(null),[r,i]=l.useState(null),[a,c]=l.useState(null);l.useEffect(()=>{u()},[]);const u=async()=>{try{const f=await te.getDefaultBrandToken();i(f)}catch(f){console.error("Failed to load brand tokens:",f)}},m=async()=>{e(!0),c(null),n(null);try{const f=await Be.captureCurrentTab(),v=await Ve.analyzePage(r),x=await ne.generateImprovedCode(f.jsxSource,v,r),g=await ne.generateDiff(f.jsxSource,x),C={id:`analysis-${Date.now()}`,timestamp:f.timestamp,imgBlob:f.screenshot,jsxSource:f.jsxSource,findings:v,generatedJsx:x,patch:g.unifiedDiff};n(C),await te.saveScreenAnalysis(C)}catch(f){console.error("Analysis failed:",f),c("Failed to analyze the current page. Please try again.")}finally{e(!1)}},d=async f=>{try{await navigator.clipboard.writeText(f)}catch(v){console.error("Failed to copy to clipboard:",v)}},p=f=>f==="error"?s.jsx(W,{className:"w-4 h-4 text-destructive"}):s.jsx(W,{className:"w-4 h-4 text-amber-500"}),h=f=>{const v={contrast:"bg-red-100 text-red-800",spacing:"bg-blue-100 text-blue-800","component-misuse":"bg-purple-100 text-purple-800"};return s.jsx(oe,{className:v[f]||"bg-gray-100 text-gray-800",children:f})};return s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-xl font-bold",children:"UX Refactor Assistant"}),s.jsxs(G,{onClick:m,disabled:o,className:"flex items-center gap-2",children:[o?s.jsx(Nt,{className:"w-4 h-4 animate-spin"}):s.jsx(re,{className:"w-4 h-4"}),o?"Analyzing...":"Capture & Analyze"]})]}),a&&s.jsxs(Pe,{variant:"destructive",children:[s.jsx(W,{className:"h-4 w-4"}),s.jsx(De,{children:a})]}),t&&s.jsxs(bt,{defaultValue:"findings",className:"w-full",children:[s.jsxs(Ae,{className:"grid w-full grid-cols-3",children:[s.jsxs(L,{value:"findings",children:["Findings (",t.findings.length,")"]}),s.jsx(L,{value:"code",children:"Code"}),s.jsx(L,{value:"diff",children:"Diff"})]}),s.jsx(O,{value:"findings",className:"space-y-4",children:s.jsxs(k,{children:[s.jsxs(V,{children:[s.jsxs(K,{className:"flex items-center gap-2",children:[s.jsx(yt,{className:"w-5 h-5 text-green-500"}),"Analysis Complete"]}),s.jsxs(J,{children:["Found ",t.findings.length," issues to improve"]})]}),s.jsx(_,{className:"space-y-3",children:t.findings.length===0?s.jsx("p",{className:"text-muted-foreground",children:"No issues found! Your UI looks great."}):t.findings.map(f=>s.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[p(f.severity),h(f.type)]}),s.jsx(oe,{variant:f.severity==="error"?"destructive":"secondary",children:f.severity})]}),s.jsx("p",{className:"text-sm",children:f.suggestion})]},f.id))})]})}),s.jsx(O,{value:"code",className:"space-y-4",children:s.jsxs(k,{children:[s.jsxs(V,{children:[s.jsxs(K,{className:"flex items-center gap-2",children:[s.jsx(wt,{className:"w-5 h-5"}),"Improved Code"]}),s.jsx(J,{children:"Generated React + Tailwind code with Radix components"})]}),s.jsx(_,{children:s.jsxs("div",{className:"relative",children:[s.jsx(G,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>d(t.generatedJsx),children:s.jsx(se,{className:"w-4 h-4"})}),s.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-auto max-h-64",children:s.jsx("code",{children:t.generatedJsx})})]})})]})}),s.jsx(O,{value:"diff",className:"space-y-4",children:s.jsxs(k,{children:[s.jsxs(V,{children:[s.jsx(K,{children:"Unified Diff"}),s.jsx(J,{children:"Changes needed to improve your UI"})]}),s.jsx(_,{children:s.jsxs("div",{className:"relative",children:[s.jsx(G,{size:"sm",variant:"outline",className:"absolute top-2 right-2",onClick:()=>d(t.patch),children:s.jsx(se,{className:"w-4 h-4"})}),s.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-auto max-h-64",children:s.jsx("code",{children:t.patch})})]})})]})})]}),!t&&!o&&s.jsx(k,{children:s.jsx(_,{className:"pt-6",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(re,{className:"w-12 h-12 mx-auto text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Ready to analyze"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Capture & Analyze" to scan the current page for UI/UX improvements'})]})]})})})]})}Ue.createRoot(document.getElementById("root")).render(s.jsx(T.StrictMode,{children:s.jsx(St,{})}));
